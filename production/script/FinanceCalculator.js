function FinanceCalculatorException(a){this.name="fCException";this.message=a} function FinanceCalculator(a,b,c,d,e,f){this.finance_rateA=["ONIF6","ONIF12","ONIB24-19.5","ONIB36-19.5"];this.finance_rateB=["ONIF6","ONIF12","ONIF24","ONIB36-19.5"];this.finance_rateC=["ONIF6","ONIF12","ONIF24","ONIF36"];this.ideal_rateA=["ONIB12-19.5","ONIB24-19.5","ONIB36-19.5"];this.ideal_rateB=["ONIF6","ONIF12","ONIB24-19.5","ONIB36-19.5"];this.ideal_rateC=["ONIF6","ONIF12","ONIF24","ONIB36-19.5"];this.financeOption=a;this.orderTotal=b;this.financeDeposit=c;this.fDepositAmount=b*(c/100);this.rateType= d;this.resetOptions=e;this.parentElement=f;this.init()}FinanceCalculator.prototype.init=function(){switch(this.rateType){case "ideal":this.ratesDisplayIdeal();this.generateTable();break;case "finance":this.ratesDisplayFinance();this.generateTable();break;case "productDetails":this.ratesDisplayProductDetails();break;default:throw new FinanceCalculatorException("Invalid Rate Type: [ENTER: ideal, finance or productDetails]!");}}; FinanceCalculator.prototype.ratesDisplayIdeal=function(){var a;if(this.orderTotal<500)throw $("#FinanceMain").hide("slow"),new FinanceCalculatorException("Order Total less than \u00a3500 !");else if(this.orderTotal>=500&&this.orderTotal<1E3)$("#FinanceMain").show("slow"),a=this.ideal_rateA;else if(this.orderTotal>=1E3&&this.orderTotal<2E3)$("#FinanceMain").show("slow"),a=this.ideal_rateB;else if(this.orderTotal>=2E3)$("#FinanceMain").show("slow"),a=this.ideal_rateC;this.parentElement?this.displayBandsProducts(a): this.displayBands(a)}; FinanceCalculator.prototype.ratesDisplayFinance=function(){var a=document.getElementById("WidgetBar"),b;if(this.orderTotal<300)if(a)$(".toggleBar").html('PLACE ORDER ABOVE <span class="highlight">\u00a3300</span> TO VIEW FINANCE OPTION!');else throw $("#FinanceMain").hide("slow"),new FinanceCalculatorException("Order Total less than \u00a3300 !");else if(this.orderTotal>=300&&this.orderTotal<1E3)a||$("#FinanceMain").show("slow"),b=this.finance_rateA;else if(this.orderTotal>=1E3&&this.orderTotal<2E3)a|| $("#FinanceMain").show("slow"),b=this.finance_rateB;else if(this.orderTotal>=2E3)a||$("#FinanceMain").show("slow"),b=this.finance_rateC;this.parentElement?this.displayBandsProducts(b):this.displayBands(b)}; FinanceCalculator.prototype.ratesDisplayProductDetails=function(){var a=document.getElementById("WidgetBar"),b;if(this.orderTotal<0)if(a)$(".toggleBar").html('Order Less than <span class="highlight">\u00a30</span>');else throw $("#FinanceMain").hide("slow"),new FinanceCalculatorException("Order Total less than \u00a3300 !");else if(this.orderTotal>0&&this.orderTotal<1E3)a||$("#FinanceMain").show("slow"),b=this.finance_rateA;else if(this.orderTotal>=1E3&&this.orderTotal<2E3)a||$("#FinanceMain").show("slow"), b=this.finance_rateB;else if(this.orderTotal>=2E3)a||$("#FinanceMain").show("slow"),b=this.finance_rateC;this.parentElement?this.displayBandsProducts(b):this.displayBands(b)};FinanceCalculator.prototype.displayBands=function(a){$("#FinanceType").html(this.resetOptions);for(var b in a)$("#FinanceType option[value="+a[b]+"]").addClass("makeSafe");$("#FinanceType option:not(.makeSafe)").remove()}; FinanceCalculator.prototype.displayBandsProducts=function(a){for(var b in a)this.parentElement.find("#FinanceType option[value="+a[b]+"]").addClass("makeSafe");this.parentElement.find("#FinanceType option:not(.makeSafe)").remove()}; FinanceCalculator.prototype.generateTable=function(){var a=new FinanceDetails(this.financeOption,parseFloat(this.orderTotal),parseInt(this.financeDeposit),parseFloat(this.fDepositAmount));$(".fd_price").text("\u00a3"+a.goods_val);$(".fd_deposit_percent").text(a.d_pc+"%");$(".fd_deposit").text("\u00a3"+a.d_amount);$(".fd_loanamount").text("\u00a3"+a.l_amount);$(".fd_terms").text(a.term+" months");$(".fd_apr").text(a.apr+"%");$(".fd_loanrepay").text("\u00a3"+a.l_repay);$(".fd_loancost").text("\u00a3"+ a.l_cost);$(".fd_totalrepay").text("\u00a3"+a.total);$(".fd_monthly").text("\u00a3"+a.m_inst);$(".MonthlyRepay").text("\u00a3"+a.m_inst)};FinanceCalculator.prototype.returnFinanceOption=function(){return new FinanceDetails(this.financeOption,parseFloat(this.orderTotal),parseInt(this.financeDeposit),parseFloat(this.fDepositAmount))}; function create(a,b){a=$.extend({title:"Notification"},a||{});new Boxy("<div><p>"+b+"</p><p class='alignCenter marginT20px'><a class='button' href='#' onclick='Boxy.get(this).hideAndUnload(); return false'>OK</a></p></div>",a);return false};